<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Your future depends on your dreams">
    <meta name="keyword" content="小炒肉, 运维工程师, Jicki, DevOps, Docker, Kubernetes">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          hyperledger-fabric v1.1.0 - 小炒肉 | Blog
        
    </title>

    <link rel="canonical" href="https://www.jicki.me/2019/01/30/2018-06-05-hyperledger-fabric-1.1.0/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('img/pexels/triangular.jpeg')
            /*post*/
        
    }
    
</style>

<header class="intro-header">
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                        </div>
                        <h1>hyperledger-fabric v1.1.0</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by 小炒肉 on
                            2019-01-30
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">小炒肉</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <blockquote>
<p>单机版 手动部署 fabric v1.1.0 实例为1.0 版本的, 使用以及说明。</p>
</blockquote>
<h1><span id="部署-hyperledger-fabric-v110">部署 hyperledger-fabric v1.1.0</span></h1>
<h2><span id="官方地址">官方地址</span></h2>
<blockquote>
<p>文档以官方文档为主 <a href="http://hyperledger-fabric.readthedocs.io/en/release-1.1/prereqs.html" target="_blank" rel="noopener">http://hyperledger-fabric.readthedocs.io/en/release-1.1/prereqs.html</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 官网 github</span><br><span class="line">https://github.com/hyperledger/fabric</span><br></pre></td></tr></table></figure>
<h2><span id="环境准备">环境准备</span></h2>
<ul>
<li>安装 Docker (用于 fabric 服务启动)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 导入 yum 源</span><br><span class="line"></span><br><span class="line"># 安装 yum-config-manager</span><br><span class="line"></span><br><span class="line">yum -y install yum-utils</span><br><span class="line"></span><br><span class="line"># 导入</span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"># 安装 docker</span><br><span class="line"></span><br><span class="line">yum -y install docker-ce</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 启动 docker </span><br><span class="line"></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start docker</span><br><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 查看 docker 版本</span><br><span class="line"></span><br><span class="line">docker version</span><br><span class="line">Client:</span><br><span class="line"> Version:      17.05.0-ce</span><br><span class="line"> API version:  1.29</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   89658be</span><br><span class="line"> Built:        Thu May  4 22:06:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:      17.05.0-ce</span><br><span class="line"> API version:  1.29 (minimum version 1.12)</span><br><span class="line"> Go version:   go1.7.5</span><br><span class="line"> Git commit:   89658be</span><br><span class="line"> Built:        Thu May  4 22:06:25 2017</span><br><span class="line"> OS/Arch:      linux/amd64</span><br><span class="line"> Experimental: false</span><br></pre></td></tr></table></figure>
<ul>
<li>安装 Docker-compose (用于 docker 容器服务统一管理 编排)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 安装 pip</span><br><span class="line"></span><br><span class="line">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span><br><span class="line"></span><br><span class="line">python get-pip.py</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 安装 docker-compose</span><br><span class="line"></span><br><span class="line">pip install docker-compose</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version</span><br><span class="line">docker-compose version 1.16.1, build 6d1ac219</span><br><span class="line">docker-py version: 2.5.1</span><br><span class="line">CPython version: 2.7.5</span><br><span class="line">OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013</span><br></pre></td></tr></table></figure>
<ul>
<li>Golang (用于 fabric cli 服务的调用， ca 服务证书生成 )</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /opt/golang</span><br><span class="line">mkdir -p /opt/gopath</span><br><span class="line"></span><br><span class="line"># 国外地址</span><br><span class="line">curl -O https://storage.googleapis.com/golang/go1.10.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># 国内地址</span><br><span class="line">curl -O https://studygolang.com/dl/golang/go1.10.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 解压</span><br><span class="line">tar zxvf go1.10.linux-amd64.tar.gz</span><br><span class="line"></span><br><span class="line"># 配置环境变量</span><br><span class="line"></span><br><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line">添加如下</span><br><span class="line"></span><br><span class="line"># golang env</span><br><span class="line">export PATH=$PATH:/opt/golang/go/bin</span><br><span class="line">export GOPATH=/opt/gopath</span><br><span class="line"></span><br><span class="line"># 生效配置</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看配置</span><br><span class="line"></span><br><span class="line">go version</span><br><span class="line">go version go1.10 linux/amd64</span><br></pre></td></tr></table></figure>
<h2><span id="环境规划">环境规划</span></h2>
<blockquote>
<p>相关hostname 必须配置 dns</p>
</blockquote>
<table>
<thead>
<tr>
<th>节点标识</th>
<th>hostname</th>
<th>IP</th>
<th>开放端口</th>
<th>系统</th>
</tr>
</thead>
<tbody>
<tr>
<td>orderer节点</td>
<td><a href="http://orderer.jicki.me" target="_blank" rel="noopener">orderer.jicki.me</a></td>
<td>192.168.168.100</td>
<td>7050</td>
<td>CentOS 7 x64</td>
</tr>
<tr>
<td>ca节点</td>
<td><a href="http://ca0.org1.jicki.me" target="_blank" rel="noopener">ca0.org1.jicki.me</a></td>
<td>192.168.168.100</td>
<td>7054</td>
<td>CentOS 7 x64</td>
</tr>
<tr>
<td>peer节点</td>
<td><a href="http://peer0.org1.jicki.me" target="_blank" rel="noopener">peer0.org1.jicki.me</a></td>
<td>192.168.168.100</td>
<td>7051, 7052, 7053</td>
<td>CentOS 7 x64</td>
</tr>
</tbody>
</table>
<h2><span id="hyperledger-fabric-源码">Hyperledger Fabric 源码</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"># 下载 Fabric 源码, 源码中 import 的路径为github.com/hyperledger/fabric ,所以我们要按照这个路径</span><br><span class="line"></span><br><span class="line">mkdir -p /opt/jicki/github.com/hyperledger</span><br><span class="line"></span><br><span class="line">cd /opt/jicki/github.com/hyperledger</span><br><span class="line"></span><br><span class="line">git clone https://github.com/hyperledger/fabric</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 文件如下:</span><br><span class="line"></span><br><span class="line">[root@localhost fabric]# ls -lt</span><br><span class="line">总用量 580</span><br><span class="line">drwxr-xr-x  7 root root    138 6月   5 09:29 vendor</span><br><span class="line">-rw-r--r--  1 root root    301 6月   5 09:29 tox.ini</span><br><span class="line">drwxr-xr-x  2 root root     56 6月   5 09:29 unit-test</span><br><span class="line">drwxr-xr-x  7 root root    134 6月   5 09:29 test</span><br><span class="line">drwxr-xr-x  2 root root   4096 6月   5 09:29 scripts</span><br><span class="line">-rw-r--r--  1 root root    316 6月   5 09:29 settings.gradle</span><br><span class="line">drwxr-xr-x  3 root root     91 6月   5 09:29 sampleconfig</span><br><span class="line">drwxr-xr-x  2 root root   4096 6月   5 09:29 release_notes</span><br><span class="line">drwxr-xr-x 11 root root   4096 6月   5 09:29 protos</span><br><span class="line">drwxr-xr-x  3 root root     30 6月   5 09:29 release</span><br><span class="line">drwxr-xr-x  9 root root    154 6月   5 09:29 peer</span><br><span class="line">drwxr-xr-x  3 root root     23 6月   5 09:29 proposals</span><br><span class="line">drwxr-xr-x  6 root root    126 6月   5 09:29 orderer</span><br><span class="line">drwxr-xr-x  6 root root   4096 6月   5 09:29 msp</span><br><span class="line">drwxr-xr-x  9 root root    130 6月   5 09:29 images</span><br><span class="line">drwxr-xr-x  2 root root     29 6月   5 09:29 gotools</span><br><span class="line">drwxr-xr-x  2 root root   4096 6月   5 09:29 idemix</span><br><span class="line">drwxr-xr-x 15 root root   4096 6月   5 09:29 gossip</span><br><span class="line">drwxr-xr-x 10 root root   4096 6月   5 09:29 examples</span><br><span class="line">drwxr-xr-x  4 root root     48 6月   5 09:29 events</span><br><span class="line">drwxr-xr-x  4 root root    137 6月   5 09:29 docs</span><br><span class="line">drwxr-xr-x  4 root root   4096 6月   5 09:29 devenv</span><br><span class="line">-rw-r--r--  1 root root   3356 6月   5 09:29 docker-env.mk</span><br><span class="line">drwxr-xr-x 20 root root   4096 6月   5 09:29 core</span><br><span class="line">drwxr-xr-x 23 root root   4096 6月   5 09:29 common</span><br><span class="line">drwxr-xr-x 10 root root   4096 6月   5 09:29 bddtests</span><br><span class="line">-rw-r--r--  1 root root     13 6月   5 09:29 ci.properties</span><br><span class="line">drwxr-xr-x  8 root root   4096 6月   5 09:29 bccsp</span><br><span class="line">-rw-r--r--  1 root root  11358 6月   5 09:29 LICENSE</span><br><span class="line">-rwxr-xr-x  1 root root  17068 6月   5 09:29 Makefile</span><br><span class="line">-rw-r--r--  1 root root   5678 6月   5 09:29 README.md</span><br><span class="line">-rw-r--r--  1 root root 475471 6月   5 09:29 CHANGELOG.md</span><br><span class="line">-rw-r--r--  1 root root    597 6月   5 09:29 CODE_OF_CONDUCT.md</span><br><span class="line">-rw-r--r--  1 root root    664 6月   5 09:29 CONTRIBUTING.md</span><br></pre></td></tr></table></figure>
<h2><span id="生成-hyperledger-fabric-证书">生成 Hyperledger Fabric 证书</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># 下载官方证书生成软件(均为二进制文件)</span><br><span class="line"># 官方离线下载地址为 https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 选择相应版本 CentOS 选择 linux-amd64-1.1.0  Mac 选择 darwin-amd64-1.1.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 下载地址为: https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/linux-amd64-1.1.0/hyperledger-fabric-linux-amd64-1.1.0.tar.gz</span><br><span class="line"></span><br><span class="line">cd /opt/jicki</span><br><span class="line"></span><br><span class="line">wget https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/linux-amd64-1.1.0/hyperledger-fabric-linux-amd64-1.1.0.tar.gz</span><br><span class="line"></span><br><span class="line">tar zxvf hyperledger-fabric-linux-amd64-1.1.0.tar.gz</span><br><span class="line"></span><br><span class="line"># 解压后是 一个 bin 与 一个 config 目录</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# tree bin/</span><br><span class="line">bin/</span><br><span class="line">├── configtxgen</span><br><span class="line">├── configtxlator</span><br><span class="line">├── cryptogen</span><br><span class="line">├── get-docker-images.sh</span><br><span class="line">├── orderer</span><br><span class="line">└── peer</span><br><span class="line"></span><br><span class="line">0 directories, 6 files</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"># 为方便使用 我们配置一个 环境变量</span><br><span class="line"></span><br><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># fabric env</span><br><span class="line">export PATH=$PATH:/opt/jicki/bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 使文件生效</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># 下载1.0 版本的 configtx.yaml  与 crypto-config.yaml 。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cd /opt/jicki/</span><br><span class="line"></span><br><span class="line">wget https://raw.githubusercontent.com/hyperledger/fabric/v1.0.0/examples/e2e_cli/crypto-config.yaml</span><br><span class="line"></span><br><span class="line">wget https://raw.githubusercontent.com/hyperledger/fabric/v1.0.0/examples/e2e_cli/configtx.yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 这里修改相应 jicki.me 为 jicki.me</span><br><span class="line"></span><br><span class="line">sed -i &apos;s/example\.com/jicki\.me/g&apos; *.yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 然后这里使用 cryptogen 软件来生成相应的证书了</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# cryptogen generate --config=./crypto-config.yaml</span><br><span class="line">org1.jicki.me</span><br><span class="line">org2.jicki.me</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 生成一个 crypto-config 证书目录</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 这里使用 configtxgen 来创建 创世区块</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 首先需要创建一个文件夹</span><br><span class="line">mkdir -p /opt/jicki/channel-artifacts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建 创世区块  TwoOrgsOrdererGenesis 名称为 configtx.yaml 中 Profiles 字段下的</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# configtxgen -profile TwoOrgsOrdererGenesis -outputBlock ./channel-artifacts/genesis.block</span><br><span class="line">2018-06-05 10:26:12.714 CST [common/tools/configtxgen] main -&gt; INFO 001 Loading configuration</span><br><span class="line">2018-06-05 10:26:12.726 CST [common/tools/configtxgen] doOutputBlock -&gt; INFO 002 Generating genesis block</span><br><span class="line">2018-06-05 10:26:12.726 CST [common/tools/configtxgen] doOutputBlock -&gt; INFO 003 Writing genesis block</span><br><span class="line"></span><br><span class="line"># 创世区块 是在 orderer 服务中使用</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# ls -lt channel-artifacts/</span><br><span class="line">总用量 12</span><br><span class="line">-rw-r--r-- 1 root root 8951 6月   5 10:26 genesis.block</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 下面来生成一个 peer 服务 中使用的 tx 文件 TwoOrgsChannel 名称为 configtx.yaml 中 Profiles 字段下的</span><br><span class="line"># 这里配置的 channelID 为 mychannel , 后续使用到</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/mychannel.tx -channelID mychannel</span><br><span class="line">2018-06-05 10:30:25.279 CST [common/tools/configtxgen] main -&gt; INFO 001 Loading configuration</span><br><span class="line">2018-06-05 10:30:25.291 CST [common/tools/configtxgen] doOutputChannelCreateTx -&gt; INFO 002 Generating new channel configtx</span><br><span class="line">2018-06-05 10:30:25.323 CST [common/tools/configtxgen] doOutputChannelCreateTx -&gt; INFO 003 Writing new channel tx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# ls -lt channel-artifacts/</span><br><span class="line">总用量 16</span><br><span class="line">-rw-r--r-- 1 root root  308 6月   5 10:30 mychannel.tx</span><br><span class="line">-rw-r--r-- 1 root root 8951 6月   5 10:26 genesis.block</span><br></pre></td></tr></table></figure>
<h2><span id="配置-hyperledger-fabric-orderer">配置 Hyperledger Fabric Orderer</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 创建文件 docker-compose-orderer.yaml</span><br><span class="line"></span><br><span class="line"># 创建于 /opt/jicki 目录下</span><br><span class="line"></span><br><span class="line">vi  docker-compose-orderer.yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">version: &apos;2&apos;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  orderer.jicki.me:</span><br><span class="line">    container_name: orderer.jicki.me</span><br><span class="line">    image: hyperledger/fabric-orderer</span><br><span class="line">    environment:</span><br><span class="line">      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=jicki_default</span><br><span class="line">      # - ORDERER_GENERAL_LOGLEVEL=error</span><br><span class="line">      - ORDERER_GENERAL_LOGLEVEL=debug</span><br><span class="line">      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0</span><br><span class="line">      - ORDERER_GENERAL_LISTENPORT=7050</span><br><span class="line">      #- ORDERER_GENERAL_GENESISPROFILE=AntiMothOrdererGenesis</span><br><span class="line">      - ORDERER_GENERAL_GENESISMETHOD=file</span><br><span class="line">      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.genesis.block</span><br><span class="line">      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP</span><br><span class="line">      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp</span><br><span class="line">      #- ORDERER_GENERAL_LEDGERTYPE=ram</span><br><span class="line">      #- ORDERER_GENERAL_LEDGERTYPE=file</span><br><span class="line">      # enabled TLS</span><br><span class="line">      - ORDERER_GENERAL_TLS_ENABLED=false</span><br><span class="line">      - ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key</span><br><span class="line">      - ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt</span><br><span class="line">      - ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]</span><br><span class="line">    working_dir: /opt/gopath/src/github.com/hyperledger/fabric</span><br><span class="line">    command: orderer</span><br><span class="line">    volumes:</span><br><span class="line">    - ./channel-artifacts/genesis.block:/var/hyperledger/orderer/orderer.genesis.block</span><br><span class="line">    - ./crypto-config/ordererOrganizations/jicki.me/orderers/orderer.jicki.me/msp:/var/hyperledger/orderer/msp</span><br><span class="line">    - ./crypto-config/ordererOrganizations/jicki.me/orderers/orderer.jicki.me/tls/:/var/hyperledger/orderer/tls</span><br><span class="line">    networks:</span><br><span class="line">      default:</span><br><span class="line">        aliases:</span><br><span class="line">          - jicki</span><br><span class="line">    ports:</span><br><span class="line">      - 7050:7050</span><br></pre></td></tr></table></figure>
<h2><span id="配置-hyperledger-fabric-peer">配置 Hyperledger Fabric Peer</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"># 创建 peer yaml 文件</span><br><span class="line"></span><br><span class="line"># 创建于 /opt/jicki 目录下</span><br><span class="line"></span><br><span class="line"># 注: 如下目录中相关的 ca 证书请替换为 各自生成的, 本文目录为 /opt/jicki/crypto-config/peerOrganizations/org1.jicki.me/ca</span><br><span class="line"></span><br><span class="line"># cli 部分  ./chaincode/go/:/opt/gopath/src/github.com/hyperledger/fabric/jicki/chaincode/go</span><br><span class="line"># 为 智能合约的目录 我们约定为这个目录 需要预先创建 </span><br><span class="line"></span><br><span class="line">mkdir -p /opt/jicki/chaincode/go</span><br><span class="line"></span><br><span class="line">cd /opt/jicki/chaincode/go</span><br><span class="line"></span><br><span class="line"># 创建以后~我们拷贝官方的 例子进来，方便后面进行合约测试</span><br><span class="line"></span><br><span class="line">cp -r /opt/jicki/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example0* /opt/jicki/chaincode/go/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 官方这里有5个例子</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# ls -lt chaincode/go/</span><br><span class="line">总用量 0</span><br><span class="line">drwxr-xr-x 2 root root 81 6月   5 11:06 chaincode_example02</span><br><span class="line">drwxr-xr-x 2 root root 69 6月   5 11:06 chaincode_example03</span><br><span class="line">drwxr-xr-x 2 root root 69 6月   5 11:06 chaincode_example04</span><br><span class="line">drwxr-xr-x 2 root root 81 6月   5 11:06 chaincode_example05</span><br><span class="line">drwxr-xr-x 2 root root 43 6月   5 11:06 chaincode_example01</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vi  docker-compose-peer.yaml</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">version: &apos;2&apos;</span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  couchdb:</span><br><span class="line">    container_name: couchdb</span><br><span class="line">    image: hyperledger/fabric-couchdb</span><br><span class="line">    # Comment/Uncomment the port mapping if you want to hide/expose the CouchDB service,</span><br><span class="line">    # for example map it to utilize Fauxton User Interface in dev environments.</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;5984:5984&quot;</span><br><span class="line">    volumes:</span><br><span class="line">      # 数据持久化，用于存储链码值</span><br><span class="line">      - /opt/jicki/couchdb/data:/opt/couchdb/data</span><br><span class="line"></span><br><span class="line">  ca0.org1.jicki.me:</span><br><span class="line">    container_name: ca0.org1.jicki.me</span><br><span class="line">    image: hyperledger/fabric-ca</span><br><span class="line">    environment:</span><br><span class="line">      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server</span><br><span class="line">      - FABRIC_CA_SERVER_CA_NAME=ca</span><br><span class="line">      - FABRIC_CA_SERVER_TLS_ENABLED=false</span><br><span class="line">      - FABRIC_CA_SERVER_TLS_CERTFILE=/etc/hyperledger/fabric-ca-server-config/ca.org1.jicki.me-cert.pem</span><br><span class="line">      - FABRIC_CA_SERVER_TLS_KEYFILE=/etc/hyperledger/fabric-ca-server-config/ebed980e19743358897c6c7e9069dbc789a872097af8d142bdc69f0ac60c89d5_sk</span><br><span class="line">    ports:</span><br><span class="line">      - &quot;7054:7054&quot;</span><br><span class="line">    command: sh -c &apos;fabric-ca-server start --ca.certfile /etc/hyperledger/fabric-ca-server-config/ca.org1.jicki.me-cert.pem --ca.keyfile /etc/hyperledger/fabric-ca-server-config/ebed980e19743358897c6c7e9069dbc789a872097af8d142bdc69f0ac60c89d5_sk -b admin:adminpw -d&apos;</span><br><span class="line">    volumes:</span><br><span class="line">      - ./crypto-config/peerOrganizations/org1.jicki.me/ca/:/etc/hyperledger/fabric-ca-server-config</span><br><span class="line"></span><br><span class="line">  peer0.org1.jicki.me:</span><br><span class="line">    container_name: peer0.org1.jicki.me</span><br><span class="line">    image: hyperledger/fabric-peer</span><br><span class="line">    environment:</span><br><span class="line">      - CORE_LEDGER_STATE_STATEDATABASE=CouchDB</span><br><span class="line">      - CORE_LEDGER_STATE_COUCHDBCONFIG_COUCHDBADDRESS=couchdb:5984</span><br><span class="line"></span><br><span class="line">      - CORE_PEER_ID=peer0.org1.jicki.me</span><br><span class="line">      - CORE_PEER_NETWORKID=jicki</span><br><span class="line">      - CORE_PEER_ADDRESS=peer0.org1.jicki.me:7051</span><br><span class="line">      - CORE_PEER_CHAINCODELISTENADDRESS=peer0.org1.jicki.me:7052</span><br><span class="line">      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org1.jicki.me:7051</span><br><span class="line">      - CORE_PEER_LOCALMSPID=Org1MSP</span><br><span class="line"></span><br><span class="line">      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span><br><span class="line">      # the following setting starts chaincode containers on the same</span><br><span class="line">      # bridge network as the peers</span><br><span class="line">      # https://docs.docker.com/compose/networking/</span><br><span class="line">      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=jicki</span><br><span class="line">      # - CORE_LOGGING_LEVEL=ERROR</span><br><span class="line">      - CORE_LOGGING_LEVEL=DEBUG</span><br><span class="line">      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=jicki_default</span><br><span class="line">      - CORE_PEER_GOSSIP_SKIPHANDSHAKE=true</span><br><span class="line">      - CORE_PEER_GOSSIP_USELEADERELECTION=true</span><br><span class="line">      - CORE_PEER_GOSSIP_ORGLEADER=false</span><br><span class="line">      - CORE_PEER_PROFILE_ENABLED=false</span><br><span class="line">      - CORE_PEER_TLS_ENABLED=false</span><br><span class="line">      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt</span><br><span class="line">      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key</span><br><span class="line">      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt</span><br><span class="line">    volumes:</span><br><span class="line">        - /var/run/:/host/var/run/</span><br><span class="line">        - ./crypto-config/peerOrganizations/org1.jicki.me/peers/peer0.org1.jicki.me/msp:/etc/hyperledger/fabric/msp</span><br><span class="line">        - ./crypto-config/peerOrganizations/org1.jicki.me/peers/peer0.org1.jicki.me/tls:/etc/hyperledger/fabric/tls</span><br><span class="line">        # 数据持久化, 存储安装，以及实例化智能合约的数据</span><br><span class="line">        - /opt/jicki/peer0:/var/hyperledger/production</span><br><span class="line">    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer</span><br><span class="line">    command: peer node start</span><br><span class="line">    ports:</span><br><span class="line">      - 7051:7051</span><br><span class="line">      - 7052:7052</span><br><span class="line">      - 7053:7053</span><br><span class="line">    depends_on:</span><br><span class="line">      - couchdb</span><br><span class="line">    networks:</span><br><span class="line">      default:</span><br><span class="line">        aliases:</span><br><span class="line">          - jicki</span><br><span class="line"></span><br><span class="line">  cli:</span><br><span class="line">    container_name: cli</span><br><span class="line">    image: hyperledger/fabric-tools</span><br><span class="line">    tty: true</span><br><span class="line">    environment:</span><br><span class="line">      - GOPATH=/opt/gopath</span><br><span class="line">      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock</span><br><span class="line">      # - CORE_LOGGING_LEVEL=ERROR</span><br><span class="line">      - CORE_LOGGING_LEVEL=DEBUG</span><br><span class="line">      - CORE_PEER_ID=cli</span><br><span class="line">      - CORE_PEER_ADDRESS=peer0.org1.jicki.me:7051</span><br><span class="line">      - CORE_PEER_LOCALMSPID=Org1MSP</span><br><span class="line">      - CORE_PEER_TLS_ENABLED=false</span><br><span class="line">      - CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.jicki.me/peers/peer0.org1.jicki.me/tls/server.crt</span><br><span class="line">      - CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.jicki.me/peers/peer0.org1.jicki.me/tls/server.key</span><br><span class="line">      - CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.jicki.me/peers/peer0.org1.jicki.me/tls/ca.crt</span><br><span class="line">      - CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.jicki.me/users/Admin@org1.jicki.me/msp</span><br><span class="line">    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer</span><br><span class="line">    volumes:</span><br><span class="line">        - /var/run/:/host/var/run/</span><br><span class="line">        - ./chaincode/go/:/opt/gopath/src/github.com/hyperledger/fabric/jicki/chaincode/go</span><br><span class="line">        - ./crypto-config:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/</span><br><span class="line">        - ./channel-artifacts:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel-artifacts</span><br><span class="line">    depends_on:</span><br><span class="line">      - peer0.org1.jicki.me</span><br></pre></td></tr></table></figure>
<h2><span id="启动-hyperledger-fabric-服务">启动 Hyperledger Fabric 服务</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 启动 orderer 服务</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# docker-compose -f docker-compose-orderer.yaml up -d</span><br><span class="line">Creating network &quot;jicki_default&quot; with the default driver</span><br><span class="line">Pulling orderer.jicki.me (hyperledger/fabric-orderer:latest)...</span><br><span class="line">latest: Pulling from hyperledger/fabric-orderer</span><br><span class="line">1be7f2b886e8: Pull complete</span><br><span class="line">6fbc4a21b806: Pull complete</span><br><span class="line">c71a6f8e1378: Pull complete</span><br><span class="line">4be3072e5a37: Pull complete</span><br><span class="line">06c6d2f59700: Pull complete</span><br><span class="line">4d536120d8a5: Pull complete</span><br><span class="line">0baaf9ec263e: Pull complete</span><br><span class="line">770563795186: Pull complete</span><br><span class="line">61d33418a569: Pull complete</span><br><span class="line">b1b98004e7c6: Pull complete</span><br><span class="line">Digest: sha256:7a0a6ca2bbddff69ddf63615cdddfe46bf5f2fe7c55530a092d597d99bd2a4bb</span><br><span class="line">Status: Downloaded newer image for hyperledger/fabric-orderer:latest</span><br><span class="line">Creating orderer.jicki.me ... </span><br><span class="line">Creating orderer.jicki.me ... done</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 启动 peer 服务</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# docker-compose -f docker-compose-peer.yaml up -d</span><br><span class="line">Creating ca0.org1.jicki.me ... </span><br><span class="line">Creating couchdb ... </span><br><span class="line">Creating couchdb ... donee ... done</span><br><span class="line">Creating ca0.org1.jicki.me</span><br><span class="line">Creating peer0.org1.jicki.me ... </span><br><span class="line">Creating peer0.org1.jicki.me ... done</span><br><span class="line">Creating cli ... </span><br><span class="line">Creating cli ... done</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 下载的镜像</span><br><span class="line"></span><br><span class="line">[root@payment jicki]# docker images</span><br><span class="line">REPOSITORY                                  TAG                   IMAGE ID            CREATED             SIZE</span><br><span class="line">hyperledger/fabric-couchdb                  latest                35228d48a25a        2 months ago        1.56GB</span><br><span class="line">hyperledger/fabric-ca                       latest                72617b4fa9b4        2 months ago        299MB</span><br><span class="line">hyperledger/fabric-tools                    latest                b7bfddf508bc        2 months ago        1.46GB</span><br><span class="line">hyperledger/fabric-orderer                  latest                ce0c810df36a        2 months ago        180MB</span><br><span class="line">hyperledger/fabric-peer                     latest                b023f9be0771        2 months ago        187MB</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 查看启动的服务</span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# docker ps -a</span><br><span class="line">77962643125a        hyperledger/fabric-tools                          &quot;/bin/bash&quot;              About a minute ago   Up About a minute                                                                                                                                       cli</span><br><span class="line">8334cd884f99        hyperledger/fabric-peer                           &quot;peer node start&quot;        About a minute ago   Up About a minute       0.0.0.0:7051-7053-&gt;7051-7053/tcp                                                                                                peer0.org1.jicki.me</span><br><span class="line">7faf1692b1c8        hyperledger/fabric-ca                             &quot;sh -c &apos;fabric-ca-...&quot;   About a minute ago   Up About a minute       0.0.0.0:7054-&gt;7054/tcp                                                                                                          ca0.org1.jicki.me</span><br><span class="line">c3d581ca1957        hyperledger/fabric-couchdb                        &quot;tini -- /docker-e...&quot;   About a minute ago   Up About a minute       4369/tcp, 9100/tcp, 0.0.0.0:5984-&gt;5984/tcp                                                                                      couchdb</span><br><span class="line">435f6268ed57        hyperledger/fabric-orderer                        &quot;orderer&quot;                39 minutes ago       Up 39 minutes           0.0.0.0:7050-&gt;7050/tcp</span><br></pre></td></tr></table></figure>
<h2><span id="hyperledger-fabric-创建channel-加盟">Hyperledger Fabric 创建Channel 加盟</span></h2>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"># 上面我们创建了 cli 容器，我们可以直接进入 容器里操作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost jicki]# docker exec -it cli bash</span><br><span class="line">root@77962643125a:/opt/gopath/src/github.com/hyperledger/fabric/peer# </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 执行 创建命令</span><br><span class="line"></span><br><span class="line">peer channel create -o orderer.jicki.me:7050 -c mychannel -t 50 -f ./channel-artifacts/mychannel.tx</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line">2018-06-05 03:58:27.812 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.812 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.813 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized</span><br><span class="line">2018-06-05 03:58:27.813 UTC [msp] GetLocalMSP -&gt; DEBU 004 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.813 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 005 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.814 UTC [msp] GetLocalMSP -&gt; DEBU 006 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.814 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 007 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.814 UTC [msp/identity] Sign -&gt; DEBU 008 Sign: plaintext: 0A96060A074F7267314D5350128A062D...53616D706C65436F6E736F727469756D </span><br><span class="line">2018-06-05 03:58:27.816 UTC [msp/identity] Sign -&gt; DEBU 009 Sign: digest: B98D97859C943C258DC17F79C1AFDB97259206D8459A523B0D2063DD6A6EDE78 </span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp] GetLocalMSP -&gt; DEBU 00a Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 00b Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp] GetLocalMSP -&gt; DEBU 00c Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 00d Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp/identity] Sign -&gt; DEBU 00e Sign: plaintext: 0ACD060A1508021A0608E394D8D80522...38F301FCA102E04B2C4451A710338CE6 </span><br><span class="line">2018-06-05 03:58:27.817 UTC [msp/identity] Sign -&gt; DEBU 00f Sign: digest: 5DF2DEECA8C542FB555728C1AF37A7135D2E73EC5A70C01DA110FA5FB7A4350B </span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp] GetLocalMSP -&gt; DEBU 010 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 011 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp] GetLocalMSP -&gt; DEBU 012 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 013 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp/identity] Sign -&gt; DEBU 014 Sign: plaintext: 0ACD060A1508021A0608E394D8D80522...7AC84BD8C96D12080A021A0012021A00 </span><br><span class="line">2018-06-05 03:58:27.855 UTC [msp/identity] Sign -&gt; DEBU 015 Sign: digest: C895D56A7881A4C5DB5BB30224F3F481B5F164E328F1220F63453B280888D492 </span><br><span class="line">2018-06-05 03:58:27.856 UTC [channelCmd] readBlock -&gt; DEBU 016 Got status: &amp;&#123;NOT_FOUND&#125;</span><br><span class="line">2018-06-05 03:58:27.856 UTC [msp] GetLocalMSP -&gt; DEBU 017 Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:27.856 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 018 Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:27.857 UTC [channelCmd] InitCmdFactory -&gt; INFO 019 Endorser and orderer connections initialized</span><br><span class="line">2018-06-05 03:58:28.057 UTC [msp] GetLocalMSP -&gt; DEBU 01a Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:28.057 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 01b Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:28.058 UTC [msp] GetLocalMSP -&gt; DEBU 01c Returning existing local MSP</span><br><span class="line">2018-06-05 03:58:28.058 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 01d Obtaining default signing identity</span><br><span class="line">2018-06-05 03:58:28.058 UTC [msp/identity] Sign -&gt; DEBU 01e Sign: plaintext: 0ACD060A1508021A0608E494D8D80522...0EE8DDD220F812080A021A0012021A00 </span><br><span class="line">2018-06-05 03:58:28.058 UTC [msp/identity] Sign -&gt; DEBU 01f Sign: digest: 3025E2B47E9058D643182FD23B581EA8504099AD34B3CDF7B672D62FC8CEDC0B </span><br><span class="line">2018-06-05 03:58:28.062 UTC [channelCmd] readBlock -&gt; DEBU 020 Received block: 0</span><br><span class="line">2018-06-05 03:58:28.062 UTC [main] main -&gt; INFO 021 Exiting.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 创建以后生成文件 mychannel.block</span><br><span class="line"></span><br><span class="line"># ls -lt</span><br><span class="line">total 12</span><br><span class="line">-rw-r--r-- 1 root root 11804 Jun  5 03:58 mychannel.block</span><br><span class="line">drwxr-xr-x 2 root root    57 Jun  5 02:30 channel-artifacts</span><br><span class="line">drwxr-xr-x 4 root root    69 Jun  5 02:20 crypto</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 加入 此 channel 中</span><br><span class="line"></span><br><span class="line">peer channel join -b mychannel.block</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2018-06-05 04:00:28.379 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:00:28.379 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:00:28.381 UTC [channelCmd] InitCmdFactory -&gt; INFO 003 Endorser and orderer connections initialized</span><br><span class="line">2018-06-05 04:00:28.382 UTC [msp/identity] Sign -&gt; DEBU 004 Sign: plaintext: 0A94070A5C08011A0C08DC95D8D80510...EF2ADBC833421A080A000A000A000A00 </span><br><span class="line">2018-06-05 04:00:28.384 UTC [msp/identity] Sign -&gt; DEBU 005 Sign: digest: 285C7FC1C3276EBE9B90898D4CF6643E59741F578EC09FE2210311D56D191F81 </span><br><span class="line">2018-06-05 04:00:28.485 UTC [channelCmd] executeJoin -&gt; INFO 006 Successfully submitted proposal to join channel</span><br><span class="line">2018-06-05 04:00:28.485 UTC [main] main -&gt; INFO 007 Exiting.....</span><br></pre></td></tr></table></figure>
<h2><span id="hyperledger-fabric-实例化测试">Hyperledger Fabric 实例化测试</span></h2>
<blockquote>
<p>在上面我们已经拷贝了官方的例子，在 chaincode 下, 下面我们来测试一下</p>
</blockquote>
<h3><span id="安装智能合约">安装智能合约</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 如上我们挂载的地址为 github.com/hyperledger/fabric/jicki/chaincode/go</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 指定安装路径 安装</span><br><span class="line"></span><br><span class="line">peer chaincode install -n mychannel -p github.com/hyperledger/fabric/jicki/chaincode/go/chaincode_example02 -v 1.0     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2018-06-05 04:03:55.916 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:03:55.916 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:03:55.917 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:03:55.917 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:03:55.917 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:03:55.963 UTC [golang-platform] getCodeFromFS -&gt; DEBU 006 getCodeFromFS github.com/hyperledger/fabric/jicki/chaincode/go/chaincode_example02</span><br><span class="line">2018-06-05 04:03:56.105 UTC [golang-platform] func1 -&gt; DEBU 007 Discarding GOROOT package fmt</span><br><span class="line">2018-06-05 04:03:56.105 UTC [golang-platform] func1 -&gt; DEBU 008 Discarding provided package github.com/hyperledger/fabric/core/chaincode/shim</span><br><span class="line">2018-06-05 04:03:56.105 UTC [golang-platform] func1 -&gt; DEBU 009 Discarding provided package github.com/hyperledger/fabric/protos/peer</span><br><span class="line">2018-06-05 04:03:56.105 UTC [golang-platform] func1 -&gt; DEBU 00a Discarding GOROOT package strconv</span><br><span class="line">2018-06-05 04:03:56.106 UTC [golang-platform] GetDeploymentPayload -&gt; DEBU 00b done</span><br><span class="line">2018-06-05 04:03:56.106 UTC [container] WriteFileToPackage -&gt; DEBU 00c Writing file to tarball: src/github.com/hyperledger/fabric/jicki/chaincode/go/chaincode_example02/chaincode_example02.go</span><br><span class="line">2018-06-05 04:03:56.107 UTC [container] WriteFileToPackage -&gt; DEBU 00d Writing file to tarball: src/github.com/hyperledger/fabric/jicki/chaincode/go/chaincode_example02/chaincode_example02_test.go</span><br><span class="line">2018-06-05 04:03:56.108 UTC [msp/identity] Sign -&gt; DEBU 00e Sign: plaintext: 0A93070A5B08031A0B08AC97D8D80510...3F79FC370000FFFF2584A7C4002A0000 </span><br><span class="line">2018-06-05 04:03:56.108 UTC [msp/identity] Sign -&gt; DEBU 00f Sign: digest: 00863649A2C1F4DCF7913323182FF13ADEA767FC30C25D83179D1ECFBEF06180 </span><br><span class="line">2018-06-05 04:03:56.124 UTC [chaincodeCmd] install -&gt; DEBU 010 Installed remotely response:&lt;status:200 payload:&quot;OK&quot; &gt;</span><br></pre></td></tr></table></figure>
<h3><span id="实例化-chaincode">实例化 Chaincode</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peer chaincode instantiate -o orderer.jicki.me:7050 -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;init&quot;,&quot;A&quot;,&quot;10&quot;,&quot;B&quot;,&quot;10&quot;]&#125;&apos; -P &quot;OR (&apos;Org1MSP.member&apos;)&quot; -v 1.0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2018-06-05 04:05:46.217 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:05:46.217 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:05:46.220 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:05:46.221 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:05:46.221 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:05:46.221 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: plaintext: 0A9E070A6608031A0B089A98D8D80510...314D53500A04657363630A0476736363 </span><br><span class="line">2018-06-05 04:05:46.221 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: digest: 461D88DFC289669A30F4B32BCCAE9AC22EF7F473A991796D71C515FE3C9E710E </span><br><span class="line">2018-06-05 04:06:07.391 UTC [msp/identity] Sign -&gt; DEBU 008 Sign: plaintext: 0A9E070A6608031A0B089A98D8D80510...743A646439C8D2AC5A7A105153A92C88 </span><br><span class="line">2018-06-05 04:06:07.391 UTC [msp/identity] Sign -&gt; DEBU 009 Sign: digest: 16B5C05D014187EE64710445C16DFD912C9BFFA637AB098A392D3FD8DA23D293 </span><br><span class="line">2018-06-05 04:06:07.393 UTC [main] main -&gt; INFO 00a Exiting.....</span><br></pre></td></tr></table></figure>
<h3><span id="操作智能合约">操作智能合约</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># query 查询方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查询 A 账户里的余额</span><br><span class="line"></span><br><span class="line">peer chaincode query -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;query&quot;,&quot;A&quot;]&#125;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line">2018-06-05 04:07:20.190 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:07:20.190 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:07:20.190 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:07:20.190 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:07:20.191 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:07:20.191 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: plaintext: 0AA3070A6B08031A0B08F898D8D80510...6E6E656C1A0A0A0571756572790A0141 </span><br><span class="line">2018-06-05 04:07:20.191 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: digest: 26BD0EFDB8015795543FDFBEF605A71870580A6DCE9B4E1285B009642116594F </span><br><span class="line">Query Result: 10</span><br><span class="line">2018-06-05 04:07:20.206 UTC [main] main -&gt; INFO 008 Exiting.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 可以看到 返回 Query Result: 10 账户上有10个币</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查询 B 账户里的余额</span><br><span class="line"></span><br><span class="line">peer chaincode query -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;query&quot;,&quot;B&quot;]&#125;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line">2018-06-05 04:09:08.238 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:09:08.238 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:09:08.238 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:09:08.238 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:09:08.239 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:09:08.239 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: plaintext: 0AA3070A6B08031A0B08E499D8D80510...6E6E656C1A0A0A0571756572790A0142 </span><br><span class="line">2018-06-05 04:09:08.239 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: digest: 8DEB3D74945B3C274B215FB16B0B5EA468EB0B2BB8121949796EE0A7DD31EAC7 </span><br><span class="line">Query Result: 10</span><br><span class="line">2018-06-05 04:09:08.256 UTC [main] main -&gt; INFO 008 Exiting.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 可以看到 返回 Query Result: 10 账户上有10个币</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br></pre></td><td class="code"><pre><span class="line"># invoke 转账方法</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 从A账户 转账 5个币 到 B 账户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">peer chaincode invoke -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;invoke&quot;, &quot;A&quot;, &quot;B&quot;, &quot;5&quot;]&#125;&apos;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2018-06-05 04:10:23.536 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:10:23.536 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:10:23.536 UTC [msp/identity] Sign -&gt; DEBU 003 Sign: plaintext: 0A94070A5C08011A0C08AF9AD8D80510...426C6F636B0A096D796368616E6E656C </span><br><span class="line">2018-06-05 04:10:23.536 UTC [msp/identity] Sign -&gt; DEBU 004 Sign: digest: 39756FDF0F4C2116D88E1E929192F7F73A5693EA3AA7CB6D6088E8330F408847 </span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 005 Initializing protos for *channelconfig.ChannelProtos</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 006 Processing field: HashingAlgorithm</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 007 Processing field: BlockDataHashingStructure</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 008 Processing field: OrdererAddresses</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 009 Processing field: Consortium</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 00a Processing field: Capabilities</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 00b Initializing protos for *channelconfig.ApplicationProtos</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 00c Processing field: Capabilities</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 00d Initializing protos for *channelconfig.ApplicationOrgProtos</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 00e Processing field: AnchorPeers</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 00f Initializing protos for *channelconfig.OrganizationProtos</span><br><span class="line">2018-06-05 04:10:23.543 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 010 Processing field: MSP</span><br><span class="line">2018-06-05 04:10:23.544 UTC [common/channelconfig] Validate -&gt; DEBU 011 Anchor peers for org Org2MSP are </span><br><span class="line">2018-06-05 04:10:23.544 UTC [common/channelconfig] validateMSP -&gt; DEBU 012 Setting up MSP for org Org2MSP</span><br><span class="line">2018-06-05 04:10:23.544 UTC [msp] newBccspMsp -&gt; DEBU 013 Creating BCCSP-based MSP instance</span><br><span class="line">2018-06-05 04:10:23.544 UTC [msp] New -&gt; DEBU 014 Creating Cache-MSP instance</span><br><span class="line">2018-06-05 04:10:23.544 UTC [msp] Setup -&gt; DEBU 015 Setting up MSP instance Org2MSP</span><br><span class="line">2018-06-05 04:10:23.544 UTC [msp/identity] newIdentity -&gt; DEBU 016 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICODCCAd6gAwIBAgIRAJ6ejnxh35HTq6Mw0B7ku6gwCgYIKoZIzj0EAwIwbTEL</span><br><span class="line">MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG</span><br><span class="line">cmFuY2lzY28xFjAUBgNVBAoTDW9yZzIuamlja2kubWUxGTAXBgNVBAMTEGNhLm9y</span><br><span class="line">ZzIuamlja2kubWUwHhcNMTgwNjA1MDIxNTQ0WhcNMjgwNjAyMDIxNTQ0WjBtMQsw</span><br><span class="line">CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy</span><br><span class="line">YW5jaXNjbzEWMBQGA1UEChMNb3JnMi5qaWNraS5tZTEZMBcGA1UEAxMQY2Eub3Jn</span><br><span class="line">Mi5qaWNraS5tZTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABHnTg44+BaU7xmqe</span><br><span class="line">mlV/V/MAQQtdYaqB0UngYI/d2af6NVrpvHF3z8QRHfDXwTjPyAyUP7zEatYa2oAx</span><br><span class="line">2P/TWnujXzBdMA4GA1UdDwEB/wQEAwIBpjAPBgNVHSUECDAGBgRVHSUAMA8GA1Ud</span><br><span class="line">EwEB/wQFMAMBAf8wKQYDVR0OBCIEINgMW+fRS/ZyGJAzLmt6UzYeErQAI+NKm47H</span><br><span class="line">Yzg9LQf3MAoGCCqGSM49BAMCA0gAMEUCIQDdSxYp/XOZD1No48Q5jPYHFzCEQ3Oy</span><br><span class="line">ReKZb4wJrtR87QIgI3ePpK56oL16ivVOmDWVINch7v10cd6hzXFrwqWjizo=</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.544 UTC [msp/identity] newIdentity -&gt; DEBU 017 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICEDCCAbegAwIBAgIRAMH1q/Lkt7ZEhmqvkw3WxQ8wCgYIKoZIzj0EAwIwbTEL</span><br><span class="line">MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG</span><br><span class="line">cmFuY2lzY28xFjAUBgNVBAoTDW9yZzIuamlja2kubWUxGTAXBgNVBAMTEGNhLm9y</span><br><span class="line">ZzIuamlja2kubWUwHhcNMTgwNjA1MDIxNTQ0WhcNMjgwNjAyMDIxNTQ0WjBYMQsw</span><br><span class="line">CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy</span><br><span class="line">YW5jaXNjbzEcMBoGA1UEAwwTQWRtaW5Ab3JnMi5qaWNraS5tZTBZMBMGByqGSM49</span><br><span class="line">AgEGCCqGSM49AwEHA0IABNAQuJzs9Jp/taEnB+88ld9IKp3lEmFdCXJ/J8K7M5FA</span><br><span class="line">Tyl+LVDsrcuPNZcU++C+l4gj4V/A3lx5W0CFFtPFIoCjTTBLMA4GA1UdDwEB/wQE</span><br><span class="line">AwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAINgMW+fRS/ZyGJAzLmt6UzYe</span><br><span class="line">ErQAI+NKm47HYzg9LQf3MAoGCCqGSM49BAMCA0cAMEQCIDZKd9vydrIuViS21vm4</span><br><span class="line">lhfUP76UPFqh1ghCmwDSfmYuAiAxAK280gRxFFphtdIWpAo9h6EIaE+JJ8FCsytQ</span><br><span class="line">W1gHtg==</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.545 UTC [msp] Validate -&gt; DEBU 018 MSP Org2MSP validating identity</span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 019 Initializing protos for *channelconfig.ApplicationOrgProtos</span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 01a Processing field: AnchorPeers</span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 01b Initializing protos for *channelconfig.OrganizationProtos</span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 01c Processing field: MSP</span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] Validate -&gt; DEBU 01d Anchor peers for org Org1MSP are </span><br><span class="line">2018-06-05 04:10:23.545 UTC [common/channelconfig] validateMSP -&gt; DEBU 01e Setting up MSP for org Org1MSP</span><br><span class="line">2018-06-05 04:10:23.545 UTC [msp] newBccspMsp -&gt; DEBU 01f Creating BCCSP-based MSP instance</span><br><span class="line">2018-06-05 04:10:23.545 UTC [msp] New -&gt; DEBU 020 Creating Cache-MSP instance</span><br><span class="line">2018-06-05 04:10:23.545 UTC [msp] Setup -&gt; DEBU 021 Setting up MSP instance Org1MSP</span><br><span class="line">2018-06-05 04:10:23.546 UTC [msp/identity] newIdentity -&gt; DEBU 022 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICNzCCAd6gAwIBAgIRALGwrHSDvHRxDs7yh3TjpdEwCgYIKoZIzj0EAwIwbTEL</span><br><span class="line">MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG</span><br><span class="line">cmFuY2lzY28xFjAUBgNVBAoTDW9yZzEuamlja2kubWUxGTAXBgNVBAMTEGNhLm9y</span><br><span class="line">ZzEuamlja2kubWUwHhcNMTgwNjA1MDIxNTQ0WhcNMjgwNjAyMDIxNTQ0WjBtMQsw</span><br><span class="line">CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy</span><br><span class="line">YW5jaXNjbzEWMBQGA1UEChMNb3JnMS5qaWNraS5tZTEZMBcGA1UEAxMQY2Eub3Jn</span><br><span class="line">MS5qaWNraS5tZTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABGP2JGdlPBOHWTto</span><br><span class="line">u60dAknaCMSTR8a3as2kDWx54sPonlQAV8gly/boL2I0DbnSGehDE9knMLNnq0pg</span><br><span class="line">xifNYzujXzBdMA4GA1UdDwEB/wQEAwIBpjAPBgNVHSUECDAGBgRVHSUAMA8GA1Ud</span><br><span class="line">EwEB/wQFMAMBAf8wKQYDVR0OBCIEIOvtmA4ZdDNYiXxsfpBp28eJqHIJevjRQr3G</span><br><span class="line">nwrGDInVMAoGCCqGSM49BAMCA0cAMEQCIGWD4muVWNrtmBp5dtiqu1JvsYl6GT+b</span><br><span class="line">zL9pvmzWkjzsAiAe4lQ/+REQK65y288HgtTmTbyW6gbuncMe/yRspTMnWQ==</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.546 UTC [msp/identity] newIdentity -&gt; DEBU 023 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICETCCAbegAwIBAgIRAJ/0or+WtZwHIxuHaq8t5fAwCgYIKoZIzj0EAwIwbTEL</span><br><span class="line">MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG</span><br><span class="line">cmFuY2lzY28xFjAUBgNVBAoTDW9yZzEuamlja2kubWUxGTAXBgNVBAMTEGNhLm9y</span><br><span class="line">ZzEuamlja2kubWUwHhcNMTgwNjA1MDIxNTQ0WhcNMjgwNjAyMDIxNTQ0WjBYMQsw</span><br><span class="line">CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy</span><br><span class="line">YW5jaXNjbzEcMBoGA1UEAwwTQWRtaW5Ab3JnMS5qaWNraS5tZTBZMBMGByqGSM49</span><br><span class="line">AgEGCCqGSM49AwEHA0IABNABvZUWsP4ZYd6Va26vLVnBloiG3FpjtBpTcjx1G5jo</span><br><span class="line">fi43B18gOMiyI/sz9RSIJ8CtQbraLavPSMJbyNOoOzGjTTBLMA4GA1UdDwEB/wQE</span><br><span class="line">AwIHgDAMBgNVHRMBAf8EAjAAMCsGA1UdIwQkMCKAIOvtmA4ZdDNYiXxsfpBp28eJ</span><br><span class="line">qHIJevjRQr3GnwrGDInVMAoGCCqGSM49BAMCA0gAMEUCIQDT0Mx+EcGPeQ3oFtKL</span><br><span class="line">cy5BX7j1Fjx7C66Alxh3QoSe+AIgWotX5bjVPi/6gbAiJWWVyga/VwxHKG+bsdVC</span><br><span class="line">sz6Q3Fc=</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.546 UTC [msp] Validate -&gt; DEBU 024 MSP Org1MSP validating identity</span><br><span class="line">2018-06-05 04:10:23.546 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 025 Initializing protos for *channelconfig.OrdererProtos</span><br><span class="line">2018-06-05 04:10:23.546 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 026 Processing field: ConsensusType</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 027 Processing field: BatchSize</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 028 Processing field: BatchTimeout</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 029 Processing field: KafkaBrokers</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 02a Processing field: ChannelRestrictions</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 02b Processing field: Capabilities</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] NewStandardValues -&gt; DEBU 02c Initializing protos for *channelconfig.OrganizationProtos</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] initializeProtosStruct -&gt; DEBU 02d Processing field: MSP</span><br><span class="line">2018-06-05 04:10:23.547 UTC [common/channelconfig] validateMSP -&gt; DEBU 02e Setting up MSP for org OrdererOrg</span><br><span class="line">2018-06-05 04:10:23.547 UTC [msp] newBccspMsp -&gt; DEBU 02f Creating BCCSP-based MSP instance</span><br><span class="line">2018-06-05 04:10:23.547 UTC [msp] New -&gt; DEBU 030 Creating Cache-MSP instance</span><br><span class="line">2018-06-05 04:10:23.547 UTC [msp] Setup -&gt; DEBU 031 Setting up MSP instance OrdererMSP</span><br><span class="line">2018-06-05 04:10:23.547 UTC [msp/identity] newIdentity -&gt; DEBU 032 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICJDCCAcqgAwIBAgIRAOKDfKO2chUveMRxRhyH9PgwCgYIKoZIzj0EAwIwYzEL</span><br><span class="line">MAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBG</span><br><span class="line">cmFuY2lzY28xETAPBgNVBAoTCGppY2tpLm1lMRQwEgYDVQQDEwtjYS5qaWNraS5t</span><br><span class="line">ZTAeFw0xODA2MDUwMjE1NDRaFw0yODA2MDIwMjE1NDRaMGMxCzAJBgNVBAYTAlVT</span><br><span class="line">MRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMREw</span><br><span class="line">DwYDVQQKEwhqaWNraS5tZTEUMBIGA1UEAxMLY2Euamlja2kubWUwWTATBgcqhkjO</span><br><span class="line">PQIBBggqhkjOPQMBBwNCAAQx8FYRaMnfxEP8XT5kTx9r/Ykgy6W0vMkaZ+/0y79/</span><br><span class="line">NVrbEl6BlQ7QMNQUUs/Y6zNk1f1PVq6jj1k9Np5J9EKRo18wXTAOBgNVHQ8BAf8E</span><br><span class="line">BAMCAaYwDwYDVR0lBAgwBgYEVR0lADAPBgNVHRMBAf8EBTADAQH/MCkGA1UdDgQi</span><br><span class="line">BCAWEky+Uck39P/A6ORyhPtqgXq3gX2lkNbgvjMlTRWKdTAKBggqhkjOPQQDAgNI</span><br><span class="line">ADBFAiEAvt1tibAkeEQoHUSR54gsQGk7WSGfwiAKLSy9w6oniVoCID8xvAl4U02e</span><br><span class="line">orJRHP0JJfJHUQQnr9rpbM/E1FSrXD+v</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.547 UTC [msp/identity] newIdentity -&gt; DEBU 033 Creating identity instance for cert -----BEGIN CERTIFICATE-----</span><br><span class="line">MIICATCCAaegAwIBAgIQFS0xZIw5gAOc2r737SWNLzAKBggqhkjOPQQDAjBjMQsw</span><br><span class="line">CQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy</span><br><span class="line">YW5jaXNjbzERMA8GA1UEChMIamlja2kubWUxFDASBgNVBAMTC2NhLmppY2tpLm1l</span><br><span class="line">MB4XDTE4MDYwNTAyMTU0NFoXDTI4MDYwMjAyMTU0NFowUzELMAkGA1UEBhMCVVMx</span><br><span class="line">EzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGcmFuY2lzY28xFzAV</span><br><span class="line">BgNVBAMMDkFkbWluQGppY2tpLm1lMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE</span><br><span class="line">qSC6oQtea8jWxOgZ3ybOFB42zpYSYzo8t/C1gz8sRSJVpAso/HGenGZZ3gpHIeIP</span><br><span class="line">fWzUw1Wef2qbRWuXBCt7iqNNMEswDgYDVR0PAQH/BAQDAgeAMAwGA1UdEwEB/wQC</span><br><span class="line">MAAwKwYDVR0jBCQwIoAgFhJMvlHJN/T/wOjkcoT7aoF6t4F9pZDW4L4zJU0VinUw</span><br><span class="line">CgYIKoZIzj0EAwIDSAAwRQIhAJWqhpVLJa+w5H+5PhPVAMLZxZp/ydeTNGjJlSIP</span><br><span class="line">anzyAiBhP1KC50lg2OPfBYwjUgogWoEgZBBFJq4Oo9WVDu2V0Q==</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line">2018-06-05 04:10:23.548 UTC [msp] Validate -&gt; DEBU 034 MSP OrdererMSP validating identity</span><br><span class="line">2018-06-05 04:10:23.548 UTC [msp] Setup -&gt; DEBU 035 Setting up the MSP manager (3 msps)</span><br><span class="line">2018-06-05 04:10:23.548 UTC [msp] Setup -&gt; DEBU 036 MSP manager setup complete, setup 3 msps</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 037 Proposed new policy Readers for Channel/Application/Org2MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 038 Proposed new policy Writers for Channel/Application/Org2MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 039 Proposed new policy Admins for Channel/Application/Org2MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03a Proposed new policy Readers for Channel/Application/Org1MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03b Proposed new policy Writers for Channel/Application/Org1MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03c Proposed new policy Admins for Channel/Application/Org1MSP</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03d Proposed new policy Admins for Channel/Application</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03e Proposed new policy Readers for Channel/Application</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 03f Proposed new policy Writers for Channel/Application</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 040 Proposed new policy Admins for Channel/Orderer/OrdererOrg</span><br><span class="line">2018-06-05 04:10:23.548 UTC [policies] NewManagerImpl -&gt; DEBU 041 Proposed new policy Readers for Channel/Orderer/OrdererOrg</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 042 Proposed new policy Writers for Channel/Orderer/OrdererOrg</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 043 Proposed new policy Admins for Channel/Orderer</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 044 Proposed new policy Readers for Channel/Orderer</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 045 Proposed new policy Writers for Channel/Orderer</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 046 Proposed new policy BlockValidation for Channel/Orderer</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 047 Proposed new policy Readers for Channel</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 048 Proposed new policy Writers for Channel</span><br><span class="line">2018-06-05 04:10:23.549 UTC [policies] NewManagerImpl -&gt; DEBU 049 Proposed new policy Admins for Channel</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04a Adding to config map: [Group]  /Channel</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04b Adding to config map: [Group]  /Channel/Orderer</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04c Adding to config map: [Group]  /Channel/Orderer/OrdererOrg</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04d Adding to config map: [Value]  /Channel/Orderer/OrdererOrg/MSP</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04e Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Writers</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 04f Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Admins</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 050 Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Readers</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 051 Adding to config map: [Value]  /Channel/Orderer/ChannelRestrictions</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 052 Adding to config map: [Value]  /Channel/Orderer/ConsensusType</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 053 Adding to config map: [Value]  /Channel/Orderer/BatchSize</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 054 Adding to config map: [Value]  /Channel/Orderer/BatchTimeout</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 055 Adding to config map: [Policy] /Channel/Orderer/Readers</span><br><span class="line">2018-06-05 04:10:23.549 UTC [common/configtx] addToMap -&gt; DEBU 056 Adding to config map: [Policy] /Channel/Orderer/Writers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 057 Adding to config map: [Policy] /Channel/Orderer/BlockValidation</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 058 Adding to config map: [Policy] /Channel/Orderer/Admins</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 059 Adding to config map: [Group]  /Channel/Application</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05a Adding to config map: [Group]  /Channel/Application/Org2MSP</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05b Adding to config map: [Value]  /Channel/Application/Org2MSP/MSP</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05c Adding to config map: [Policy] /Channel/Application/Org2MSP/Admins</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05d Adding to config map: [Policy] /Channel/Application/Org2MSP/Readers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05e Adding to config map: [Policy] /Channel/Application/Org2MSP/Writers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 05f Adding to config map: [Group]  /Channel/Application/Org1MSP</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 060 Adding to config map: [Value]  /Channel/Application/Org1MSP/MSP</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 061 Adding to config map: [Policy] /Channel/Application/Org1MSP/Readers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 062 Adding to config map: [Policy] /Channel/Application/Org1MSP/Writers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 063 Adding to config map: [Policy] /Channel/Application/Org1MSP/Admins</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 064 Adding to config map: [Policy] /Channel/Application/Readers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 065 Adding to config map: [Policy] /Channel/Application/Writers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 066 Adding to config map: [Policy] /Channel/Application/Admins</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 067 Adding to config map: [Value]  /Channel/OrdererAddresses</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 068 Adding to config map: [Value]  /Channel/Consortium</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 069 Adding to config map: [Value]  /Channel/HashingAlgorithm</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 06a Adding to config map: [Value]  /Channel/BlockDataHashingStructure</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 06b Adding to config map: [Policy] /Channel/Writers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 06c Adding to config map: [Policy] /Channel/Admins</span><br><span class="line">2018-06-05 04:10:23.550 UTC [common/configtx] addToMap -&gt; DEBU 06d Adding to config map: [Policy] /Channel/Readers</span><br><span class="line">2018-06-05 04:10:23.550 UTC [chaincodeCmd] InitCmdFactory -&gt; INFO 06e Get chain(mychannel) orderer endpoint: orderer.jicki.me:7050</span><br><span class="line">2018-06-05 04:10:23.553 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 06f Using default escc</span><br><span class="line">2018-06-05 04:10:23.553 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 070 Using default vscc</span><br><span class="line">2018-06-05 04:10:23.553 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 071 java chaincode disabled</span><br><span class="line">2018-06-05 04:10:23.553 UTC [msp/identity] Sign -&gt; DEBU 072 Sign: plaintext: 0AA4070A6C08031A0C08AF9AD8D80510...06696E766F6B650A01410A01420A0135 </span><br><span class="line">2018-06-05 04:10:23.553 UTC [msp/identity] Sign -&gt; DEBU 073 Sign: digest: DEB9F3D773E6846F307010CB0B74D12F382948C9A74E99722E24AA0E8B85EA22 </span><br><span class="line">2018-06-05 04:10:23.571 UTC [msp/identity] Sign -&gt; DEBU 074 Sign: plaintext: 0AA4070A6C08031A0C08AF9AD8D80510...45F7B2AC73F72A9F1955EF3DD72ACD37 </span><br><span class="line">2018-06-05 04:10:23.571 UTC [msp/identity] Sign -&gt; DEBU 075 Sign: digest: F695C4F1347EA760A59E3E1D76A796625F6280D0FB82B3596605D16B609D6B3F </span><br><span class="line">2018-06-05 04:10:23.573 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; DEBU 076 ESCC invoke result: version:1 response:&lt;status:200 message:&quot;OK&quot; &gt; payload:&quot;\n 3\021:I\033\214\205\225\242\\T\177D\030:EL\336v\350\213\204\367:\354M\217\253\000\251&#125;\276\022f\nM\022\031\n\004lscc\022\021\n\017\n\tmychannel\022\002\010\001\0220\n\tmychannel\022#\n\007\n\001A\022\002\010\001\n\007\n\001B\022\002\010\001\032\006\n\001A\032\0015\032\007\n\001B\032\00215\032\003\010\310\001\&quot;\020\022\tmychannel\032\0031.0&quot; endorsement:&lt;endorser:&quot;\n\007Org1MSP\022\212\006-----BEGIN CERTIFICATE-----\nMIICEDCCAbagAwIBAgIQONKn7NxyKRszERjAoW/iJzAKBggqhkjOPQQDAjBtMQsw\nCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNU2FuIEZy\nYW5jaXNjbzEWMBQGA1UEChMNb3JnMS5qaWNraS5tZTEZMBcGA1UEAxMQY2Eub3Jn\nMS5qaWNraS5tZTAeFw0xODA2MDUwMjE1NDRaFw0yODA2MDIwMjE1NDRaMFgxCzAJ\nBgNVBAYTAlVTMRMwEQYDVQQIEwpDYWxpZm9ybmlhMRYwFAYDVQQHEw1TYW4gRnJh\nbmNpc2NvMRwwGgYDVQQDExNwZWVyMC5vcmcxLmppY2tpLm1lMFkwEwYHKoZIzj0C\nAQYIKoZIzj0DAQcDQgAExPvxGKgil1iaJjmDjnqsVgQVooziKPN4zn+IyczDEukJ\nEQlsD4JLbKHV+qfHFoGWOBMLnXSccHI8kMLgXg4cSqNNMEswDgYDVR0PAQH/BAQD\nAgeAMAwGA1UdEwEB/wQCMAAwKwYDVR0jBCQwIoAg6+2YDhl0M1iJfGx+kGnbx4mo\ncgl6+NFCvcafCsYMidUwCgYIKoZIzj0EAwIDSAAwRQIhAOSZmNgcSaGTo0t2Amvh\nMvsrghoSS3KT/6W8PVhPqf/9AiBBw5RBC6lelO7sxpjPjxkQgQfZAyJ2SOnh3HHb\n+22yqA==\n-----END CERTIFICATE-----\n&quot; signature:&quot;0D\002 z\017V\0213\0100\265\251J\303\254s\375o\016\223D\032\225;\037@\r\212&apos;Vxq\217\361l\002 w\034\320I\036\335\260P\210U\372\020\346Pq\022E\367\262\254s\367*\237\031U\357=\327*\3157&quot; &gt; </span><br><span class="line">2018-06-05 04:10:23.573 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 077 Chaincode invoke successful. result: status:200 </span><br><span class="line">2018-06-05 04:10:23.573 UTC [main] main -&gt; INFO 078 Exiting.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 可以看到返回 invoke successful. result: status:200 成功</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 这里再查询 A 与 B 的账户</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># A 账户余额 Query Result: 5</span><br><span class="line"></span><br><span class="line">peer chaincode query -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;query&quot;,&quot;A&quot;]&#125;&apos;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line">2018-06-05 04:11:24.256 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:11:24.256 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:11:24.256 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:11:24.256 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:11:24.256 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:11:24.257 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: plaintext: 0AA3070A6B08031A0B08EC9AD8D80510...6E6E656C1A0A0A0571756572790A0141 </span><br><span class="line">2018-06-05 04:11:24.257 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: digest: 37E28D7C8C673D454A7BFE2483C896D6DAEB685BC873D413846FBAA656D1D8E2 </span><br><span class="line">Query Result: 5</span><br><span class="line">2018-06-05 04:11:24.273 UTC [main] main -&gt; INFO 008 Exiting.....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># B 账户余额 Query Result: 15</span><br><span class="line"></span><br><span class="line">peer chaincode query -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;query&quot;,&quot;B&quot;]&#125;&apos;   </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 输出如下:</span><br><span class="line"></span><br><span class="line">2018-06-05 04:11:46.861 UTC [msp] GetLocalMSP -&gt; DEBU 001 Returning existing local MSP</span><br><span class="line">2018-06-05 04:11:46.861 UTC [msp] GetDefaultSigningIdentity -&gt; DEBU 002 Obtaining default signing identity</span><br><span class="line">2018-06-05 04:11:46.861 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc</span><br><span class="line">2018-06-05 04:11:46.863 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc</span><br><span class="line">2018-06-05 04:11:46.863 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode disabled</span><br><span class="line">2018-06-05 04:11:46.864 UTC [msp/identity] Sign -&gt; DEBU 006 Sign: plaintext: 0AA4070A6C08031A0C08829BD8D80510...6E6E656C1A0A0A0571756572790A0142 </span><br><span class="line">2018-06-05 04:11:46.864 UTC [msp/identity] Sign -&gt; DEBU 007 Sign: digest: E3255F6FDA1F24F6BC6DD7C42075748CC27AC41900EECB07F884E2B608A8B709 </span><br><span class="line">Query Result: 15</span><br><span class="line">2018-06-05 04:11:46.878 UTC [main] main -&gt; INFO 008 Exiting.....</span><br></pre></td></tr></table></figure>
<h2><span id="hyperledger-fabric-操作命令">Hyperledger Fabric 操作命令</span></h2>
<h3><span id="peer-命令">peer 命令</span></h3>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode          # 对链进行操作</span><br><span class="line">peer channel            # channel相关操作</span><br><span class="line">peer logging            # 设置日志级别</span><br><span class="line">peer node               # 启动、管理节点</span><br><span class="line">peer version            # 查看版本信息</span><br></pre></td></tr></table></figure>
<blockquote>
<p>upgrade 更新合约 更新合约相当于将合约重新实例化，并带有一个新的版本号。</p>
<p>更新合约之前，需要在所有的 peer节点 上安装(install)最新的合约，并使用新的版本号。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 更新合约</span><br><span class="line"></span><br><span class="line"># 首先安装(install)新的合约, 以本文为例, chaincode_example02, 初次安装版本号为 1.0 </span><br><span class="line"></span><br><span class="line">peer chaincode install -n mychannel -p github.com/hyperledger/fabric/jicki/chaincode/go/chaincode_example02 -v 1.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 更新版本为 1.1 的合约</span><br><span class="line">peer chaincode upgrade -o orderer.jicki.me:7050 -C mychannel -n mychannel -c &apos;&#123;&quot;Args&quot;:[&quot;init&quot;,&quot;A&quot;,&quot;10&quot;,&quot;B&quot;,&quot;10&quot;]&#125;&apos; -P &quot;OR (&apos;Org1MSP.member&apos;)&quot; -v 1.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 旧版本的合约, 目前，fabric不支持合约的启动与暂停。要暂停或删除合约，只能到peer上手动删除容器。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 查看 已经创建的 通道 (channel)</span><br><span class="line"></span><br><span class="line">peer channel  list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看通道(channel) 的状态 -c(小写) 加 通道名称</span><br><span class="line"></span><br><span class="line">peer channel getinfo -c mychannel</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看已经 安装的 智能合约(chincode)</span><br><span class="line"></span><br><span class="line">peer chaincode  list --installed</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 查看已经 实例化的 智能合约(chincode) 需要使用 -C(大写) 加通道名称</span><br><span class="line"></span><br><span class="line">peer chaincode -C mychannel list --instantiated</span><br></pre></td></tr></table></figure>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2019/01/30/2018-07-24-hyperledger-fabric-1.2/" data-toggle="tooltip" data-placement="top" title="hyperledger-fabric v 1.2">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2019/01/30/2018-04-23-kubernetes-1.10.1/" data-toggle="tooltip" data-placement="top" title="kubernetes 1.10.1">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share" data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                    <div class="comment">
                        <div id="disqus_thread" class="disqus-thread"></div>
                    </div>
                
                <!-- disqus comment end -->

                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">部署 hyperledger-fabric v1.1.0</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">官方地址</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">环境准备</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">环境规划</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">Hyperledger Fabric 源码</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">生成 Hyperledger Fabric 证书</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">配置 Hyperledger Fabric Orderer</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">配置 Hyperledger Fabric Peer</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">启动 Hyperledger Fabric 服务</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.9.</span> <span class="toc-nav-text">Hyperledger Fabric 创建Channel 加盟</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.10.</span> <span class="toc-nav-text">Hyperledger Fabric 实例化测试</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.10.1.</span> <span class="toc-nav-text">安装智能合约</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.10.2.</span> <span class="toc-nav-text">实例化 Chaincode</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.10.3.</span> <span class="toc-nav-text">操作智能合约</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.11.</span> <span class="toc-nav-text">Hyperledger Fabric 操作命令</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#undefined"><span class="toc-nav-number">1.11.1.</span> <span class="toc-nav-text">peer 命令</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="https://www.jicki.me" target="_blank">小炒肉</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>




<!-- disqus embedded js code start (one page only need to embed once) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = "jicki";
    var disqus_identifier = "https://www.jicki.me/2019/01/30/2018-06-05-hyperledger-fabric-1.1.0/";
    var disqus_url = "https://www.jicki.me/2019/01/30/2018-06-05-hyperledger-fabric-1.1.0/";

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<!-- disqus embedded js code start end -->





<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/jicki234">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/jicki">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">知</i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="http://weibo.com/jicki520">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/jicki">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://github.com/jicki">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank" href="https://www.linkedin.com/in/jicki">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 小炒肉 2019 
                    <br>
                    Theme by <a href="http://beantech.org">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com">胡伟煌</a> | 
                    <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=huweihuang&repo=hexo-theme-huweihuang&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://www.jicki.me/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-85602329-1';
    var _gaDomain = 'jicki.me';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = '1b38b88e4559c6725330b8c3328e2de3';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="https://www.jicki.me/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
